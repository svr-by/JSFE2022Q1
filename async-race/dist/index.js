(()=>{"use strict";var e={373:(e,t,n)=>{n.r(t)},724:function(e,t,n){var i=this&&this.__awaiter||function(e,t,n,i){return new(n||(n=Promise))((function(a,r){function s(e){try{l(i.next(e))}catch(e){r(e)}}function o(e){try{l(i.throw(e))}catch(e){r(e)}}function l(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,o)}l((i=i.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.API=void 0;const a=n(604);t.API=new class{constructor(){this.getCars=(e,t=7)=>i(this,void 0,void 0,(function*(){const n=yield fetch(`${this.garage}?_page=${e}&_limit=${t}`).catch((e=>console.log(e.message)));if(n&&n.ok)return{items:yield n.json(),count:n.headers.get("X-Total-Count")}})),this.getCar=e=>i(this,void 0,void 0,(function*(){const t=yield fetch(`${this.garage}/${e}`);return yield t.json()})),this.createCar=e=>i(this,void 0,void 0,(function*(){const t=yield fetch(`${this.garage}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});return yield t.json()})),this.deleteCar=e=>i(this,void 0,void 0,(function*(){const t=yield fetch(`${this.garage}/${e}`,{method:"DELETE"});return yield t.json()})),this.updateCar=(e,t)=>i(this,void 0,void 0,(function*(){const n=yield fetch(`${this.garage}/${e}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});return yield n.json()})),this.updateEngine=(e,t)=>i(this,void 0,void 0,(function*(){const n=yield fetch(`${this.engine}?id=${e}&status=${t}`,{method:"PATCH"}).catch();return n.ok?yield n.json():{success:!1}})),this.startEngine=e=>i(this,void 0,void 0,(function*(){return yield this.updateEngine(e,a.engineStatus.started)})),this.stopEngine=e=>i(this,void 0,void 0,(function*(){return yield this.updateEngine(e,a.engineStatus.stopped)})),this.driveEngine=e=>i(this,void 0,void 0,(function*(){const t=yield fetch(`${this.engine}?id=${e}&status=${a.engineStatus.drive}`,{method:"PATCH"}).catch();return t.ok?yield t.json():{success:!1}})),this.getSortOrder=(e,t)=>e&&t?`&_sort=${e}&_order=${t}`:"",this.getWinners=(e,t,n,a=10)=>i(this,void 0,void 0,(function*(){const r=yield fetch(`${this.winners}?_page=${e}&_limit=${a}${this.getSortOrder(t,n)}`).catch((e=>console.log(e.message)));if(r&&r.ok){const e=yield r.json();return{items:yield Promise.all(e.map((e=>i(this,void 0,void 0,(function*(){return Object.assign(Object.assign({},e),{car:yield this.getCar(e.id)})}))))),count:r.headers.get("X-Total-Count")}}})),this.getWinner=e=>i(this,void 0,void 0,(function*(){const t=yield fetch(`${this.winners}/${e}`);return yield t.json()})),this.createWinner=e=>i(this,void 0,void 0,(function*(){const t=yield fetch(`${this.winners}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});return yield t.json()})),this.deleteWinner=e=>i(this,void 0,void 0,(function*(){const t=yield fetch(`${this.winners}/${e}`,{method:"DELETE"});return yield t.json()})),this.updateWinner=(e,t)=>i(this,void 0,void 0,(function*(){const n=yield fetch(`${this.winners}/${e}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});return yield n.json()})),this.base="http://127.0.0.1:3000",this.garage=`${this.base}/garage`,this.engine=`${this.base}/engine`,this.winners=`${this.base}/winners`}}},962:function(e,t,n){var i=this&&this.__awaiter||function(e,t,n,i){return new(n||(n=Promise))((function(a,r){function s(e){try{l(i.next(e))}catch(e){r(e)}}function o(e){try{l(i.throw(e))}catch(e){r(e)}}function l(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,o)}l((i=i.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0});const a=n(977),r=n(719),s=n(0),o=n(174);t.default=class{constructor(){this.render=()=>i(this,void 0,void 0,(function*(){document.body.innerHTML='\n    <main class="main">\n      <div class="wrapper">\n        <section class="garage-page"></section>\n        <section class="winners-page"></section>\n      </div>\n    </main>\n    ',a.header.render(),r.control.render(),s.footer.render(),yield o.layoutService.updateGarage(),yield o.layoutService.updateWinners()}))}}},113:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Button=void 0,t.Button=class{constructor(e,t,n){this.elem=document.createElement("button"),this.elem.innerText=`${e}`,t&&(this.elem.id=t),n&&this.elem.classList.add(...n)}appendToParent(e){const t=document.querySelector(e);t&&t.appendChild(this.elem)}}},719:function(e,t,n){var i=this&&this.__awaiter||function(e,t,n,i){return new(n||(n=Promise))((function(a,r){function s(e){try{l(i.next(e))}catch(e){r(e)}}function o(e){try{l(i.throw(e))}catch(e){r(e)}}function l(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,o)}l((i=i.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.control=void 0;const a=n(113),r=n(69),s=n(774),o=n(649);t.control=new class{constructor(){this.render=()=>{this.elem.classList.add("control"),this.elem.innerHTML='\n      <h3 class="control__title">Control panel</h3>\n      <div class="control__row" id="controlCreate"></div>\n      <div class="control__row" id="controlUpdate"></div>\n      <div class="control__row" id="controlRace"></div>\n    ';const e=document.querySelector(".garage-page");e&&e.append(this.elem),this.inpTextCreate.appendToParent("#controlCreate"),this.inpTextCreate.elem.placeholder="Input car's name",this.inpColorCreate.appendToParent("#controlCreate"),this.btnCreate.appendToParent("#controlCreate"),this.btnCreate.elem.disabled=!0,this.inpTextUpdate.appendToParent("#controlUpdate"),this.inpTextUpdate.elem.disabled=!0,this.inpColorUpdate.appendToParent("#controlUpdate"),this.inpColorUpdate.elem.disabled=!0,this.btnUpdate.appendToParent("#controlUpdate"),this.btnUpdate.elem.disabled=!0,this.btnRace.appendToParent("#controlRace"),this.btnReset.appendToParent("#controlRace"),this.btnReset.elem.disabled=!0,this.btnGenerate.appendToParent("#controlRace"),this.addListeners()},this.addListeners=()=>{this.inpTextCreate.elem.addEventListener("input",(()=>{this.btnCreate.elem.disabled=0===this.inpTextCreate.elem.value.length})),this.btnCreate.elem.addEventListener("click",(()=>i(this,void 0,void 0,(function*(){const e={name:this.inpTextCreate.elem.value,color:this.inpColorCreate.elem.value};yield s.carService.createCar(e)})))),this.btnUpdate.elem.addEventListener("click",(()=>i(this,void 0,void 0,(function*(){const e={name:this.inpTextUpdate.elem.value,color:this.inpColorUpdate.elem.value};yield s.carService.updateCar(e)})))),this.btnGenerate.elem.addEventListener("click",(()=>i(this,void 0,void 0,(function*(){this.btnGenerate.elem.disabled=!0,yield s.carService.generateCars(),this.btnGenerate.elem.disabled=!1})))),this.btnRace.elem.addEventListener("click",(()=>i(this,void 0,void 0,(function*(){this.btnRace.elem.disabled=!0,this.btnGenerate.elem.disabled=!0,yield o.racingService.startDriveAll(),this.btnReset.elem.disabled=!1,this.btnGenerate.elem.disabled=!1})))),this.btnReset.elem.addEventListener("click",(()=>i(this,void 0,void 0,(function*(){this.btnReset.elem.disabled=!0,yield o.racingService.stopDriveAll(),this.btnRace.elem.disabled=!1}))))},this.elem=document.createElement("div"),this.inpTextCreate=new r.Input("text","inpTextCreate",["control__input"]),this.inpColorCreate=new r.Input("color","inpColorCreate",["control__color"]),this.btnCreate=new a.Button("Create","btnCreate",["button","control__btn"]),this.inpTextUpdate=new r.Input("text","inpTextUpdate",["control__input"]),this.inpColorUpdate=new r.Input("color","inpColorUpdate",["control__color"]),this.btnUpdate=new a.Button("Update","btnUpdate",["button","control__btn"]),this.btnRace=new a.Button("Race","btnRace",["button","control__btn"]),this.btnReset=new a.Button("Reset","btnReset",["button","control__btn"]),this.btnGenerate=new a.Button("Generate Cars","btnGenerate",["button","control__btn"])}}},0:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.footer=void 0,t.footer=new class{constructor(){this.elem=document.createElement("footer"),this.render=()=>{this.elem.innerHTML='\n      <div class="wrapper footer__wrapper">\n        <div>\n          2022 <a href="https://github.com/svr-by" class="footer__link">svr-by</a>\n        </div>\n        <div>\n          <a href="https://rs.school/js/">\n            <img src="assets/img/rs_school_js.svg" alt="RSSchool"  class="footer__img">\n          </a>\n        </div>\n      </div>\n    ',document.body.append(this.elem)}}}},445:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Car=void 0,t.Car=class{constructor(){this.animationRace=(e,t)=>{let n=null;const i={driveId:0},a=r=>{n||(n=r);const s=r-n,o=Math.round(s*(e/t));this.elem.style.transform=`translateX(${Math.min(o,e)}px)`,o<e&&(i.driveId=window.requestAnimationFrame(a))};return i.driveId=window.requestAnimationFrame(a),i},this.returnToStart=()=>{this.elem.style.transform="translateX(0px)",this.renderCarImg()},this.renderCarImg=(e="#FF0000",t="#808080")=>{this.elem.innerHTML=`\n    <svg width="${this.width}" height="${this.height}" viewBox="0 0 550 158" fill="none" xmlns="http://www.w3.org/2000/svg">\n    <g clip-path="url(#clip0_2_2)">\n    <path opacity="0.76" fill-rule="evenodd" clip-rule="evenodd" d="M155.917 137.368L45.1476 131.143C45.1476 131.143 38.9169 81.3444 40.6476 80.9985C42.3784 80.6527 94.3015 52.9869 94.3015 52.9869L154.186 82.3818L155.917 137.368Z" fill="#4D4D4D" stroke="#100000" stroke-width="0.541867"/>\n    <path opacity="0.76" d="M482.34 77.5403C482.34 78.9236 489.264 134.947 489.264 134.947L374.34 136.676C374.34 136.676 376.417 77.1945 378.84 75.1196C381.263 73.0446 427.648 57.1368 427.648 57.1368L482.34 77.5403Z" fill="#4D4D4D" stroke="#100000" stroke-width="0.541867"/>\n    <path d="M541.403 134.541L549.934 95.0238C520.984 78.2276 492.811 60.3233 457.638 52.4071C436.393 50.6565 411.894 52.9687 394.04 46.9831C364.203 31.6183 335.1 15.3375 301.744 4.36641C249.985 -3.76519 203.439 0.472235 159.035 9.79032L60.5345 39.2346C45.5447 38.9009 32.0005 40.2523 11.7814 33.8237L13.2233 48.5328L0.0382629 90.3747C12.7676 126.519 16.4501 121.346 23.3061 130.667C23.3061 130.667 47.3494 141.515 49.6761 137.641C52.0029 133.766 50.4518 97.3483 50.4518 97.3483C59.8455 80.8593 73.2773 67.5552 100.09 64.8047C129.731 66.8871 140.807 82.5231 146.625 101.997C151.045 116.461 150.151 130.925 148.177 145.389L207.897 142.29L223.409 136.091L381.63 139.965V99.6729C387.329 83.9861 395.007 68.9789 429.717 63.255C456.591 66.3402 472.417 79.9176 481.765 99.5897L480.906 143.064L541.403 134.541Z" fill="${this.bodyColor}"/>\n    <path opacity="0.76" fill-rule="evenodd" clip-rule="evenodd" d="M549.78 113.111C549.138 113.218 534.262 113.86 534.048 114.715C533.834 115.571 531.372 122.52 531.372 122.52C531.372 122.52 534.583 127.653 535.011 127.332C535.439 127.011 555.025 124.873 555.025 124.873L549.78 113.111Z" fill="#808080" stroke="#100000" stroke-width="0.541867"/>\n    <path opacity="0.76" d="M556.523 95.6832C552.135 98.3563 539.292 101.029 539.292 101.992C539.292 102.954 534.797 110.652 534.797 110.652C534.797 110.652 553.419 109.797 554.275 109.797C555.132 109.797 556.523 95.6832 556.523 95.6832Z" fill="#808080" stroke="#100000" stroke-width="0.541867"/>\n    <g opacity="0.76" filter="url(#filter0_d_2_2)">\n    <path d="M332.952 51.9494L293.49 13.909C293.49 11.2533 202.452 9.11257 202.798 14.9465C202.922 17.0464 211.452 46.4163 211.452 46.4163L332.952 51.9494Z" fill="#808080"/>\n    <path d="M332.952 51.9494L293.49 13.909C293.49 11.2533 202.452 9.11257 202.798 14.9465C202.922 17.0464 211.452 46.4163 211.452 46.4163L332.952 51.9494Z" stroke="#100000" stroke-width="0.541867"/>\n    </g>\n    <path opacity="0.76" d="M200.571 14.2548C180.393 16.896 158.018 21.0866 122.34 34.6584V40.1915L206.802 45.3788L200.571 14.2548Z" fill="#808080" stroke="#100000" stroke-width="0.541867"/>\n    <path opacity="0.76" d="M348.379 54.716C364.615 64.9966 355.833 95.5104 351.84 122.151" stroke="#100000" stroke-width="0.541867"/>\n    <path opacity="0.76" d="M199.186 47.1079C192.234 54.7883 199.081 81.5241 209.225 112.814C256.231 120.32 304.038 119.832 351.494 122.843" stroke="#100000" stroke-width="1.26455"/>\n    <path opacity="0.76" d="M388.533 114.197C388.533 138.071 407.905 157.425 431.802 157.425C455.699 157.425 475.071 138.071 475.071 114.197C475.071 90.3234 455.699 70.9697 431.802 70.9697C407.905 70.9697 388.533 90.3234 388.533 114.197V114.197Z" stroke="#100000" stroke-width="0.541867"/>\n    <path opacity="0.76" d="M388.533 114.197C388.533 138.071 407.905 157.425 431.802 157.425C455.699 157.425 475.071 138.071 475.071 114.197C475.071 90.3234 455.699 70.9697 431.802 70.9697C407.905 70.9697 388.533 90.3234 388.533 114.197V114.197Z" stroke="#100000" stroke-width="0.541867"/>\n    <path opacity="0.76" d="M399.196 114.197C399.196 132.188 413.794 146.772 431.802 146.772C449.809 146.772 464.407 132.188 464.407 114.197C464.407 96.2073 449.809 81.6233 431.802 81.6233C413.794 81.6233 399.196 96.2073 399.196 114.197V114.197Z" stroke="#100000" stroke-width="0.408322"/>\n    <path d="M388.533 114.197C388.533 138.071 407.905 157.425 431.802 157.425C455.699 157.425 475.071 138.071 475.071 114.197C475.071 90.3234 455.699 70.9697 431.802 70.9697C407.905 70.9697 388.533 90.3234 388.533 114.197V114.197Z" fill="black" stroke="#100000" stroke-width="0.541867"/>\n    <path opacity="0.76" d="M399.196 114.197C399.196 132.188 413.794 146.772 431.802 146.772C449.809 146.772 464.407 132.188 464.407 114.197C464.407 96.2073 449.809 81.6233 431.802 81.6233C413.794 81.6233 399.196 96.2073 399.196 114.197V114.197Z" fill="#808080" stroke="#100000" stroke-width="0.408322"/>\n    <path d="M54.8399 113.16C54.8399 137.034 74.2123 156.388 98.1092 156.388C122.006 156.388 141.379 137.034 141.379 113.16C141.379 89.286 122.006 69.9322 98.1092 69.9322C74.2123 69.9322 54.8399 89.286 54.8399 113.16V113.16Z" fill="black" stroke="#100000" stroke-width="0.541867"/>\n    <path opacity="0.76" d="M65.5038 113.16C65.5038 131.15 80.1017 145.734 98.1092 145.734C116.117 145.734 130.715 131.15 130.715 113.16C130.715 95.1698 116.117 80.5859 98.1092 80.5859C80.1017 80.5859 65.5038 95.1698 65.5038 113.16V113.16Z" fill="#999999" stroke="#100000" stroke-width="0.408322"/>\n    <path opacity="0.76" d="M324.032 38.6929C325.397 39.7021 326.649 40.7675 326.802 42.3817C326.383 43.5057 326.828 44.0549 324.725 46.301C318.84 48.8955 312.956 49.1057 307.071 49.2981C304.997 48.7974 304.558 47.4793 304.302 46.0705L303.725 37.3096C304.13 35.7935 305.169 34.9096 306.494 34.3125C313.2 34.2994 319.462 35.0472 324.032 38.6929Z" fill="black" stroke="#100000" stroke-width="0.541867"/>\n    <g opacity="0.76">\n    <path d="M386 41.9767L373.03 45.9535L332.754 47L312.958 27.9535L310 20.6279L321.15 11" fill="#808080"/>\n    <path d="M386 41.9767L373.03 45.9535L332.754 47L312.958 27.9535L310 20.6279L321.15 11" stroke="#100000" stroke-width="0.541867"/>\n    </g>\n    <g opacity="0.76">\n    <path d="M532.533 82.7277C503.297 89.277 483.814 83.73 481.302 57.1368Z" fill="${t}"/>\n    <path d="M532.533 82.7277C503.297 89.277 483.814 83.73 481.302 57.1368" stroke="#100000" stroke-width="0.541867"/>\n    </g>\n    <g opacity="0.76">\n    <path d="M3.0248 45.8923L28.8076 41.9651C39.3499 52.7395 37.832 54.9634 39.4445 59.4066C38.9698 61.1007 38.9016 62.7948 36.6696 64.4889C24.9537 65.2754 13.2377 63.5594 1.52178 62.2943" fill="${e}"/>\n    <path d="M3.0248 45.8923L28.8076 41.9651C39.3499 52.7395 37.832 54.9634 39.4445 59.4066C38.9698 61.1007 38.9016 62.7948 36.6696 64.4889C24.9537 65.2754 13.2377 63.5594 1.52178 62.2943" stroke="#100000" stroke-width="0.541867"/>\n    </g>\n    <path d="M385.75 112.219C385.75 137.122 405.956 157.309 430.883 157.309C455.809 157.309 476.016 137.122 476.016 112.219C476.016 87.3167 455.809 67.1293 430.883 67.1293C405.956 67.1293 385.75 87.3167 385.75 112.219V112.219Z" fill="black" stroke="#FF0000" stroke-width="0.0553196"/>\n    <path d="M394.131 112.219C394.131 132.497 410.586 148.935 430.883 148.935C451.18 148.935 467.634 132.497 467.634 112.219C467.634 91.9415 451.18 75.5031 430.883 75.5031C410.586 75.5031 394.131 91.9415 394.131 112.219V112.219Z" fill="#C6D2D2" stroke="#FF0000" stroke-width="0.045046"/>\n    <path d="M397.355 112.09C397.355 130.589 412.366 145.586 430.883 145.586C449.399 145.586 464.41 130.589 464.41 112.09C464.41 93.5914 449.399 78.595 430.883 78.595C412.366 78.595 397.355 93.5914 397.355 112.09V112.09Z" fill="#4D4D4D" stroke="#FF0000" stroke-width="0.045046"/>\n    <path d="M420.051 112.219C420.051 118.196 424.9 123.041 430.883 123.041C436.865 123.041 441.715 118.196 441.715 112.219C441.715 106.243 436.865 101.398 430.883 101.398C424.9 101.398 420.051 106.243 420.051 112.219V112.219Z" fill="#B3B3B3" stroke="#FF0000" stroke-width="0.045046"/>\n    <path d="M427.272 112.219L421.856 146.487H427.272C427.902 144.784 427.676 142.331 430.883 142.88V112.219H427.272Z" fill="#CCCCCC" stroke="#FF0000" stroke-width="0.045046"/>\n    <path d="M427.272 112.219L421.856 146.487C423.54 146.885 425.167 147.328 427.272 147.389C427.902 145.686 427.676 142.331 430.883 142.88V112.219H427.272Z" fill="#CCCCCC" stroke="#FF0000" stroke-width="0.045046"/>\n    <path d="M434.493 112.219L439.909 146.487C438.226 146.885 436.598 147.328 434.493 147.389C433.863 145.686 434.09 142.331 430.883 142.88V112.219H434.493Z" fill="#CCCCCC" stroke="#FF0000" stroke-width="0.045046"/>\n    <path d="M427.272 112.219L421.856 146.487C423.54 146.885 425.167 147.328 427.272 147.389C427.902 145.686 427.676 142.331 430.883 142.88V112.219H427.272Z" fill="#CCCCCC"/>\n    <path d="M430.298 115.265L461.246 131C462.145 129.523 463.07 128.114 463.778 126.133C462.351 125.008 459.088 124.186 460.602 121.309L431.413 111.834L430.298 115.265Z" fill="#CCCCCC"/>\n    <path d="M434.132 113.331L458.675 88.7878C457.547 87.4773 456.491 86.1634 454.824 84.8778C453.312 85.886 451.522 88.7329 449.25 86.4054L431.211 111.211L434.132 113.331Z" fill="#CCCCCC"/>\n    <path d="M433.476 109.091L417.696 78.1865C416.1 78.8535 414.522 79.4507 412.784 80.6373C413.276 82.3856 415.433 84.9663 412.515 86.4054L430.555 111.211L433.476 109.091Z" fill="#CCCCCC"/>\n    <path d="M429.236 108.403L394.94 113.847C395.082 115.57 395.163 117.253 395.755 119.272C397.572 119.344 400.695 118.092 401.164 121.309L430.352 111.834L429.236 108.403Z" fill="#CCCCCC"/>\n    <path d="M434.493 112.219L439.909 146.487C438.226 146.885 436.598 147.328 434.493 147.389C433.863 145.686 434.09 142.331 430.883 142.88V112.219H434.493Z" fill="#CCCCCC"/>\n    <path d="M432.529 108.403L466.825 113.847C466.683 115.57 466.602 117.253 466.01 119.272C464.193 119.344 461.07 118.092 460.602 121.309L431.413 111.834L432.529 108.403Z" fill="#CCCCCC"/>\n    <path d="M428.29 109.091L444.07 78.1865C445.666 78.8535 447.243 79.4507 448.982 80.6373C448.489 82.3856 446.332 84.9663 449.25 86.4054L431.211 111.211L428.29 109.091Z" fill="#CCCCCC"/>\n    <path d="M427.634 113.331L403.09 88.7878C404.218 87.4773 405.274 86.1634 406.941 84.8778C408.454 85.886 410.244 88.7329 412.515 86.4054L430.555 111.211L427.634 113.331Z" fill="#CCCCCC"/>\n    <path d="M431.468 115.265L400.519 131C399.62 129.523 398.696 128.114 397.987 126.133C399.414 125.008 402.677 124.186 401.164 121.309L430.352 111.834L431.468 115.265Z" fill="#CCCCCC"/>\n    <path fill-rule="evenodd" clip-rule="evenodd" d="M429.077 119.434L431.544 120.094L433.349 118.29L432.688 115.826L430.222 115.166L428.417 116.97L429.077 119.434Z" fill="black"/>\n    <path fill-rule="evenodd" clip-rule="evenodd" d="M429.077 119.434L431.544 120.094L433.349 118.29L432.688 115.826L430.222 115.166L428.417 116.97L429.077 119.434Z" fill="black"/>\n    <path fill-rule="evenodd" clip-rule="evenodd" d="M437.723 115.779L439.114 113.64L437.955 111.367L435.405 111.233L434.015 113.373L435.174 115.645L437.723 115.779Z" fill="black"/>\n    <path fill-rule="evenodd" clip-rule="evenodd" d="M436.916 106.434L435.309 104.452L432.787 104.851L431.872 107.232L433.479 109.215L436.001 108.816L436.916 106.434Z" fill="black"/>\n    <path fill-rule="evenodd" clip-rule="evenodd" d="M427.771 104.314L425.387 105.228L424.988 107.747L426.972 109.353L429.355 108.439L429.755 105.919L427.771 104.314Z" fill="black"/>\n    <path fill-rule="evenodd" clip-rule="evenodd" d="M422.926 112.348L423.06 114.895L425.335 116.053L427.476 114.664L427.342 112.117L425.068 110.959L422.926 112.348Z" fill="black"/>\n    <path d="M431.781 112.511L431.576 112.563C431.619 112.731 431.697 112.86 431.808 112.948C431.92 113.037 432.057 113.081 432.218 113.081C432.386 113.081 432.521 113.047 432.626 112.979C432.731 112.911 432.811 112.812 432.865 112.683C432.92 112.555 432.947 112.416 432.947 112.268C432.947 112.107 432.916 111.966 432.855 111.846C432.793 111.726 432.705 111.635 432.591 111.572C432.477 111.51 432.352 111.479 432.215 111.479C432.06 111.479 431.93 111.518 431.824 111.597C431.718 111.676 431.644 111.787 431.603 111.93L431.805 111.978C431.841 111.865 431.893 111.783 431.961 111.731C432.03 111.68 432.116 111.654 432.219 111.654C432.339 111.654 432.438 111.683 432.518 111.74C432.598 111.797 432.655 111.873 432.687 111.97C432.719 112.066 432.736 112.165 432.736 112.267C432.736 112.399 432.716 112.514 432.678 112.612C432.64 112.71 432.58 112.784 432.499 112.832C432.418 112.881 432.33 112.905 432.235 112.905C432.12 112.905 432.023 112.872 431.943 112.806C431.864 112.74 431.81 112.642 431.781 112.511V112.511Z" fill="black"/>\n    <path d="M431.493 113.054L430.897 111.505H430.676L430.041 113.054H430.275L430.456 112.585H431.104L431.275 113.054H431.493ZM431.045 112.418H430.52L430.681 111.989C430.731 111.859 430.767 111.752 430.791 111.668C430.811 111.767 430.839 111.866 430.875 111.964L431.045 112.418Z" fill="black"/>\n    <path d="M429.872 113.054V111.505H429.185C429.046 111.505 428.941 111.519 428.869 111.547C428.797 111.575 428.74 111.624 428.697 111.694C428.654 111.765 428.632 111.843 428.632 111.928C428.632 112.038 428.668 112.13 428.739 112.206C428.81 112.281 428.92 112.329 429.069 112.349C429.015 112.376 428.974 112.401 428.946 112.427C428.886 112.482 428.829 112.55 428.775 112.633L428.505 113.054H428.764L428.969 112.732C429.029 112.639 429.078 112.568 429.117 112.519C429.156 112.469 429.19 112.435 429.221 112.415C429.252 112.395 429.283 112.382 429.315 112.374C429.338 112.369 429.376 112.366 429.429 112.366H429.667V113.054H429.872ZM429.667 112.189H429.226C429.132 112.189 429.059 112.179 429.006 112.16C428.953 112.14 428.913 112.109 428.885 112.067C428.858 112.024 428.844 111.978 428.844 111.928C428.844 111.855 428.871 111.794 428.924 111.747C428.977 111.7 429.061 111.676 429.176 111.676H429.667V112.189Z" fill="black"/>\n    <path d="M53.3653 112.882C53.3653 137.784 73.5721 157.972 98.4985 157.972C123.425 157.972 143.632 137.784 143.632 112.882C143.632 87.9795 123.425 67.7921 98.4985 67.7921C73.5721 67.7921 53.3653 87.9795 53.3653 112.882V112.882Z" fill="black" stroke="#FF0000" stroke-width="0.0553196"/>\n    <path d="M61.7471 112.882C61.7471 133.16 78.2013 149.598 98.4984 149.598C118.796 149.598 135.25 133.16 135.25 112.882C135.25 92.6042 118.796 76.1659 98.4984 76.1659C78.2013 76.1659 61.7471 92.6042 61.7471 112.882V112.882Z" fill="#C6D2D2" stroke="#FF0000" stroke-width="0.045046"/>\n    <path d="M64.971 112.753C64.971 131.252 79.9817 146.248 98.4985 146.248C117.015 146.248 132.026 131.252 132.026 112.753C132.026 94.2542 117.015 79.2578 98.4985 79.2578C79.9817 79.2578 64.971 94.2542 64.971 112.753V112.753Z" fill="#4D4D4D" stroke="#FF0000" stroke-width="0.045046"/>\n    <path d="M87.6665 112.882C87.6665 118.859 92.5161 123.704 98.4985 123.704C104.481 123.704 109.33 118.859 109.33 112.882C109.33 106.905 104.481 102.06 98.4985 102.06C92.5161 102.06 87.6665 106.905 87.6665 112.882V112.882Z" fill="#B3B3B3" stroke="#FF0000" stroke-width="0.045046"/>\n    <path d="M94.8878 112.882L89.4718 147.15H94.8878C95.518 145.447 95.2913 142.994 98.4984 143.543V112.882H94.8878Z" fill="#CCCCCC" stroke="#FF0000" stroke-width="0.045046"/>\n    <path d="M94.8878 112.882L89.4718 147.15C91.1556 147.548 92.7828 147.991 94.8878 148.052C95.518 146.348 95.2913 142.994 98.4984 143.543V112.882H94.8878Z" fill="#CCCCCC" stroke="#FF0000" stroke-width="0.045046"/>\n    <path d="M102.109 112.882L107.525 147.15C105.841 147.548 104.214 147.991 102.109 148.052C101.479 146.348 101.706 142.994 98.4984 143.543V112.882H102.109Z" fill="#CCCCCC" stroke="#FF0000" stroke-width="0.045046"/>\n    <path d="M94.8878 112.882L89.4718 147.15C91.1556 147.548 92.7828 147.991 94.8878 148.052C95.518 146.348 95.2913 142.994 98.4984 143.543V112.882H94.8878Z" fill="#CCCCCC"/>\n    <path d="M97.9133 115.927L128.862 131.663C129.761 130.186 130.686 128.777 131.394 126.796C129.967 125.67 126.704 124.849 128.218 121.972L99.0291 112.497L97.9133 115.927Z" fill="#CCCCCC"/>\n    <path d="M101.747 113.994L126.291 89.4506C125.163 88.14 124.107 86.8262 122.44 85.5406C120.928 86.5488 119.137 89.3957 116.866 87.0682L98.8264 111.874L101.747 113.994Z" fill="#CCCCCC"/>\n    <path d="M101.092 109.753L85.3115 78.8493C83.7152 79.5163 82.1382 80.1135 80.3993 81.3001C80.8917 83.0484 83.0487 85.6291 80.131 87.0682L98.1705 111.874L101.092 109.753Z" fill="#CCCCCC"/>\n    <path d="M96.8521 109.066L62.556 114.51C62.6977 116.232 62.7789 117.915 63.3712 119.934C65.1877 120.007 68.311 118.755 68.7793 121.972L97.9678 112.497L96.8521 109.066Z" fill="#CCCCCC"/>\n    <path d="M102.109 112.882L107.525 147.15C105.841 147.548 104.214 147.991 102.109 148.052C101.479 146.348 101.706 142.994 98.4985 143.543V112.882H102.109Z" fill="#CCCCCC"/>\n    <path d="M100.145 109.066L134.441 114.51C134.299 116.232 134.218 117.915 133.626 119.934C131.809 120.007 128.686 118.755 128.218 121.972L99.0291 112.497L100.145 109.066Z" fill="#CCCCCC"/>\n    <path d="M95.9053 109.753L111.685 78.8493C113.282 79.5163 114.859 80.1135 116.598 81.3001C116.105 83.0484 113.948 85.6291 116.866 87.0682L98.8264 111.874L95.9053 109.753Z" fill="#CCCCCC"/>\n    <path d="M95.2494 113.994L70.7061 89.4506C71.8342 88.14 72.8901 86.8262 74.5571 85.5406C76.0693 86.5488 77.8595 89.3957 80.131 87.0682L98.1705 111.874L95.2494 113.994Z" fill="#CCCCCC"/>\n    <path d="M99.0836 115.927L68.1348 131.663C67.2358 130.186 66.3114 128.777 65.6027 126.796C67.0297 125.67 70.2931 124.849 68.7794 121.972L97.9678 112.497L99.0836 115.927Z" fill="#CCCCCC"/>\n    <path fill-rule="evenodd" clip-rule="evenodd" d="M96.6931 120.096L99.1592 120.756L100.965 118.953L100.304 116.489L97.8377 115.829L96.0323 117.633L96.6931 120.096Z" fill="black"/>\n    <path fill-rule="evenodd" clip-rule="evenodd" d="M96.6932 120.096L99.1593 120.756L100.965 118.953L100.304 116.489L97.8377 115.829L96.0324 117.633L96.6932 120.096Z" fill="black"/>\n    <path fill-rule="evenodd" clip-rule="evenodd" d="M105.339 116.441L106.73 114.302L105.571 112.03L103.021 111.896L101.63 114.035L102.79 116.308L105.339 116.441Z" fill="black"/>\n    <path fill-rule="evenodd" clip-rule="evenodd" d="M104.532 107.097L102.925 105.115L100.403 105.514L99.4882 107.895L101.095 109.877L103.617 109.478L104.532 107.097Z" fill="black"/>\n    <path fill-rule="evenodd" clip-rule="evenodd" d="M95.3865 104.977L93.0029 105.891L92.6035 108.41L94.5877 110.015L96.9712 109.101L97.3706 106.582L95.3865 104.977Z" fill="black"/>\n    <path fill-rule="evenodd" clip-rule="evenodd" d="M90.5421 113.011L90.6757 115.558L92.9506 116.716L95.0918 115.327L94.9582 112.78L92.6833 111.622L90.5421 113.011Z" fill="black"/>\n    <path d="M99.3972 113.174L99.192 113.226C99.235 113.394 99.3124 113.523 99.4242 113.611C99.5359 113.699 99.6726 113.744 99.8341 113.744C100.001 113.744 100.137 113.71 100.242 113.642C100.347 113.574 100.426 113.475 100.481 113.346C100.536 113.217 100.563 113.079 100.563 112.931C100.563 112.77 100.532 112.629 100.47 112.509C100.409 112.389 100.321 112.297 100.207 112.235C100.093 112.173 99.9677 112.141 99.8309 112.141C99.6757 112.141 99.5453 112.181 99.4395 112.26C99.3337 112.339 99.26 112.45 99.2184 112.593L99.4205 112.64C99.4564 112.528 99.5086 112.445 99.577 112.394C99.6454 112.343 99.7315 112.317 99.8351 112.317C99.9543 112.317 100.054 112.345 100.134 112.403C100.214 112.46 100.27 112.536 100.303 112.632C100.335 112.729 100.351 112.828 100.351 112.93C100.351 113.062 100.332 113.177 100.294 113.275C100.255 113.373 100.195 113.447 100.114 113.495C100.033 113.544 99.9455 113.568 99.851 113.568C99.736 113.568 99.6387 113.535 99.559 113.469C99.4793 113.403 99.4254 113.304 99.3972 113.174V113.174Z" fill="black"/>\n    <path d="M99.1084 113.717L98.5129 112.168H98.2918L97.6571 113.717H97.8909L98.0717 113.248H98.7202L98.8905 113.717H99.1084ZM98.6609 113.081H98.1352L98.2971 112.652C98.3464 112.522 98.3831 112.414 98.4071 112.331C98.4268 112.43 98.4547 112.529 98.4906 112.627L98.6609 113.081Z" fill="black"/>\n    <path d="M97.4879 113.717V112.168H96.8003C96.6621 112.168 96.557 112.182 96.4851 112.21C96.4131 112.237 96.3556 112.287 96.3126 112.357C96.2696 112.428 96.2481 112.505 96.2481 112.591C96.2481 112.701 96.2837 112.793 96.3549 112.869C96.4262 112.944 96.5362 112.992 96.685 113.012C96.6307 113.038 96.5894 113.064 96.5612 113.089C96.5013 113.144 96.4445 113.213 96.3909 113.295L96.1212 113.717H96.3793L96.5845 113.395C96.6444 113.302 96.6938 113.231 96.7326 113.181C96.7714 113.132 96.8061 113.098 96.8368 113.078C96.8675 113.058 96.8987 113.044 96.9304 113.037C96.9537 113.032 96.9917 113.029 97.0446 113.029H97.2826V113.717H97.4879ZM97.2826 112.852H96.8415C96.7477 112.852 96.6744 112.842 96.6215 112.823C96.5686 112.803 96.5284 112.772 96.5009 112.73C96.4734 112.687 96.4597 112.641 96.4597 112.591C96.4597 112.517 96.4863 112.457 96.5395 112.41C96.5928 112.363 96.6769 112.339 96.7918 112.339H97.2826V112.852Z" fill="black"/>\n    </g>\n    <defs>\n    <filter id="filter0_d_2_2" x="198.526" y="10.96" width="139.131" height="49.2927" filterUnits="userSpaceOnUse" color-interpolation-filters="sRGB">\n    <feFlood flood-opacity="0" result="BackgroundImageFix"/>\n    <feColorMatrix in="SourceAlpha" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0" result="hardAlpha"/>\n    <feOffset dy="4"/>\n    <feGaussianBlur stdDeviation="2"/>\n    <feComposite in2="hardAlpha" operator="out"/>\n    <feColorMatrix type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.25 0"/>\n    <feBlend mode="normal" in2="BackgroundImageFix" result="effect1_dropShadow_2_2"/>\n    <feBlend mode="normal" in="SourceGraphic" in2="effect1_dropShadow_2_2" result="shape"/>\n    </filter>\n    <clipPath id="clip0_2_2">\n    <rect width="550" height="158" fill="white" transform="matrix(-1 0 0 1 550 0)"/>\n    </clipPath>\n    </defs>\n    </svg>\n    `},this.elem=document.createElement("div"),this.elem.classList.add("car"),this.bodyColor="#FFB021",this.width=150,this.height=45}animationAlarm(){const e="#fbff00";let t=1;return setInterval((()=>{t++%2?this.renderCarImg(e,e):this.renderCarImg()}),250)}}},785:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.garage=void 0;const i=n(74),a=n(770),r=n(174),s=n(657);t.garage=new class{constructor(){this.render=()=>{this.elem.innerHTML="";const e=r.layoutService.createElement("h2",`Garage (${s.state.garageTotalCars})`,["page-title"]),t=r.layoutService.createElement("h3",`Page #${s.state.garagePage}`,["page-num"]),n=r.layoutService.createElement("div","",["race-track"]);s.state.garageTracks=[],s.state.garageCars.forEach((e=>{const t=new i.Track;s.state.garageTracks.push(t);const a=t.render(e);n.append(a)})),this.elem.append(e),this.elem.append(t),this.elem.append(n),this.elem.append(this.pagination.elem),this.elem.append(this.winnerMessage);const a=document.querySelector(".garage-page");a&&a.append(this.elem)},this.showWinner=e=>{this.winnerMessage.classList.add("visible");const t=(e.time/1e3).toFixed(2);this.winnerMessage.innerText=`Racer ${e.id} went first in ${t}s!`,setTimeout((()=>{this.winnerMessage.innerText="",this.winnerMessage.classList.remove("visible")}),5e3)},this.blockPage=()=>{this.winnerMessage.classList.add("warning"),this.winnerMessage.innerText="Sorry, server not found! ",[...document.querySelectorAll("button"),...document.querySelectorAll("input")].forEach((e=>e.disabled=!0))},this.elem=document.createElement("div"),this.elem.classList.add("garage"),this.winnerMessage=document.createElement("h2"),this.winnerMessage.classList.add("winner-message"),this.pagination=new a.Pagination}}},74:function(e,t,n){var i=this&&this.__awaiter||function(e,t,n,i){return new(n||(n=Promise))((function(a,r){function s(e){try{l(i.next(e))}catch(e){r(e)}}function o(e){try{l(i.throw(e))}catch(e){r(e)}}function l(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,o)}l((i=i.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.Track=void 0;const a=n(174),r=n(774),s=n(649),o=n(113),l=n(445);t.Track=class{constructor(){this.render=({id:e,name:t,color:n})=>{this.carId=e;const i=a.layoutService.createElement("div","",["track__control"]);this.btnSelect.elem.dataset.carId=`${e}`,this.btnRemove.elem.dataset.carId=`${e}`,i.append(this.btnSelect.elem),i.append(this.btnRemove.elem),this.elem.append(i);const r=a.layoutService.createElement("div","",["track__road"]),s=a.layoutService.createElement("div","",["launcher"]);this.btnStart.elem.dataset.carId=`${e}`,this.btnStop.elem.dataset.carId=`${e}`,this.btnStop.elem.disabled=!0,s.append(this.btnStart.elem),s.append(this.btnStop.elem),this.car.bodyColor=n,this.car.renderCarImg(),this.car.elem.dataset.carId=`${e}`;const o=a.layoutService.createElement("h4",`${t}`,["track__name"]);return this.finish.dataset.carId=`${e}`,r.append(s),r.append(this.car.elem),r.append(o),r.append(this.finish),this.elem.append(r),this.addListeners(),this.elem},this.addListeners=()=>{this.btnRemove.elem.addEventListener("click",this.removeCar),this.btnSelect.elem.addEventListener("click",this.selectCar),this.btnStart.elem.addEventListener("click",this.startDrive),this.btnStop.elem.addEventListener("click",this.stopDrive)},this.removeCar=()=>i(this,void 0,void 0,(function*(){const e=this.btnRemove.elem.dataset.carId;e&&(yield r.carService.removeCar(+e))})),this.selectCar=()=>i(this,void 0,void 0,(function*(){let e=this.btnSelect.elem.dataset.carId;e&&(document.querySelectorAll(".select").forEach((t=>{t.dataset.carId!==e&&t.classList.remove("select")})),this.btnSelect.elem.classList.toggle("select"),e=this.btnSelect.elem.classList.contains("select")?e:void 0,yield r.carService.selectCar(e))})),this.startDrive=()=>i(this,void 0,void 0,(function*(){this.btnStart.elem.disabled=!0;const e=a.layoutService.getDistance(this.car.elem,this.finish)+.5*this.car.width,{success:t,id:n,time:i}=yield s.racingService.requestDrive(this.car,e);return this.btnStop.elem.disabled=!1,{success:t,id:n,time:i}})),this.stopDrive=()=>i(this,void 0,void 0,(function*(){this.btnStop.elem.disabled=!0,yield s.racingService.requestStopDrive(this.car),this.btnStart.elem.disabled=!1})),this.elem=a.layoutService.createElement("div","",["track"]),this.finish=a.layoutService.createElement("div","",["finish"]),this.car=new l.Car,this.btnSelect=new o.Button("Select",void 0,["button"]),this.btnRemove=new o.Button("Remove",void 0,["button"]),this.btnStart=new o.Button("A",void 0,["track__btn"]),this.btnStop=new o.Button("B",void 0,["track__btn"]),this.carId=null}}},977:function(e,t,n){var i=this&&this.__awaiter||function(e,t,n,i){return new(n||(n=Promise))((function(a,r){function s(e){try{l(i.next(e))}catch(e){r(e)}}function o(e){try{l(i.throw(e))}catch(e){r(e)}}function l(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,o)}l((i=i.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.header=void 0;const a=n(113),r=n(657),s=n(174);t.header=new class{constructor(){this.render=()=>{this.elem.innerHTML='\n      <div class="wrapper header__wrapper">\n        <a href="javascript:void(0)">\n          <div class="logo">\n            <img src="assets/img/logo.png" alt="Logo" class="logo__img">\n          </div>\n        </a>\n        <nav class="nav"></nav>\n      </div>\n    ',document.body.prepend(this.elem),this.btnGarage.appendToParent(".nav"),this.btnWinners.appendToParent(".nav"),this.addListeners()},this.addListeners=()=>{const e=document.querySelector(".garage-page"),t=document.querySelector(".winners-page");this.btnGarage.elem.addEventListener("click",(()=>{r.state.view="garage",t.style.display="none",e.style.display="block"})),this.btnWinners.elem.addEventListener("click",(()=>i(this,void 0,void 0,(function*(){r.state.view="winners",yield s.layoutService.updateWinners(),t.style.display="block",e.style.display="none"}))))},this.elem=document.createElement("header"),this.elem.classList.add("header"),this.btnGarage=new a.Button("To garage","btnGarage",["button"]),this.btnWinners=new a.Button("To winners","btnGarage",["button"])}}},69:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Input=void 0,t.Input=class{constructor(e,t,n){this.elem=document.createElement("input"),e&&this.elem.setAttribute("type",`${e}`),t&&(this.elem.id=t),n&&this.elem.classList.add(...n)}appendToParent(e){const t=document.querySelector(e);t&&t.appendChild(this.elem)}}},770:function(e,t,n){var i=this&&this.__awaiter||function(e,t,n,i){return new(n||(n=Promise))((function(a,r){function s(e){try{l(i.next(e))}catch(e){r(e)}}function o(e){try{l(i.throw(e))}catch(e){r(e)}}function l(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,o)}l((i=i.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.Pagination=void 0;const a=n(113),r=n(657),s=n(174);t.Pagination=class{constructor(){this.addListeners=()=>{this.btnPrev.elem.addEventListener("click",(()=>i(this,void 0,void 0,(function*(){yield s.layoutService.renderPrevPage()})))),this.btnNext.elem.addEventListener("click",(()=>i(this,void 0,void 0,(function*(){yield s.layoutService.renderNextPage()}))))},this.updatePagination=()=>{let e,t,n;"garage"===r.state.view?(e=r.state.garagePage,t=r.state.garageTotalCars,n=r.state.garagePageLimit):(e=r.state.winnersPage,t=r.state.winnersTotalCars,n=r.state.winnersPageLimit),this.elem.style.display=n>=t?"none":"block",this.btnNext.elem.disabled=!(e*n<t),this.btnPrev.elem.disabled=!(e>1)},this.elem=document.createElement("div"),this.elem.classList.add("pagination"),this.btnPrev=new a.Button("Prev",void 0,["button"]),this.btnPrev.elem.disabled=!0,this.elem.append(this.btnPrev.elem),this.btnNext=new a.Button("Next",void 0,["button"]),this.btnNext.elem.disabled=!0,this.elem.append(this.btnNext.elem),this.addListeners()}}},287:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.winners=void 0;const i=n(174),a=n(770),r=n(445),s=n(657);t.winners=new class{constructor(){this.render=()=>{this.elem.innerHTML=`\n      <h2 class="page-title page-title--winners">Winners (${s.state.winnersTotalCars})</h2>\n      <h3 class="page-num page-num--winners">Page #${s.state.winnersPage}</h3>\n      <table class="winners__table">\n        <thead class="winners__th">\n          <th>Number</th>\n          <th>Car</th>\n          <th>Name</th>\n          <th class="winners__btn" id="by-wins">Wins</th>\n          <th class="winners__btn" id="by-time">Best time, s</th>\n        </thead>\n        <tbody>\n        </tbody>\n      </table>\n    `;const e=this.elem.querySelector("tbody");s.state.winnersCars.map((t=>{const n=this.renderWinnerRow(t);e.append(n)})),this.addListeners(),this.elem.append(this.pagination.elem);const t=document.querySelector(".winners-page");t&&t.append(this.elem)},this.renderWinnerRow=e=>{const t=i.layoutService.createElement("tr","");t.append(i.layoutService.createElement("th",`${e.car.id}`));const n=new r.Car;return n.bodyColor=e.car.color,n.width=100,n.renderCarImg(),t.append(n.elem),t.append(i.layoutService.createElement("th",`${e.car.name}`)),t.append(i.layoutService.createElement("th",`${e.wins}`)),t.append(i.layoutService.createElement("th",`${e.time}`)),t},this.addListeners=()=>{this.elem.querySelector("#by-wins").addEventListener("click",(()=>i.layoutService.setSortOrder("wins"))),this.elem.querySelector("#by-time").addEventListener("click",(()=>i.layoutService.setSortOrder("time")))},this.elem=document.createElement("div"),this.elem.classList.add("winners"),this.pagination=new a.Pagination}}},607:function(e,t,n){var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),n(373),(new(i(n(962)).default)).render()},774:function(e,t,n){var i=this&&this.__awaiter||function(e,t,n,i){return new(n||(n=Promise))((function(a,r){function s(e){try{l(i.next(e))}catch(e){r(e)}}function o(e){try{l(i.throw(e))}catch(e){r(e)}}function l(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,o)}l((i=i.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.carService=void 0;const a=n(719),r=n(724),s=n(657),o=n(174);t.carService=new class{constructor(){this.createCar=e=>i(this,void 0,void 0,(function*(){yield r.API.createCar(e),o.layoutService.updateControl(),yield o.layoutService.updateGarage()})),this.removeCar=e=>i(this,void 0,void 0,(function*(){yield r.API.deleteCar(e),o.layoutService.updateControl(),yield o.layoutService.updateGarage(),yield r.API.deleteWinner(e),yield o.layoutService.updateGarage()})),this.selectCar=e=>i(this,void 0,void 0,(function*(){let t=!0,n="",i="#000000";e?(t=!1,s.state.selectedCar=yield r.API.getCar(+e),n=s.state.selectedCar.name,i=s.state.selectedCar.color):s.state.selectedCar=null,a.control.inpTextUpdate.elem.value=n,a.control.inpColorUpdate.elem.value=i,a.control.inpTextUpdate.elem.disabled=t,a.control.inpColorUpdate.elem.disabled=t,a.control.btnUpdate.elem.disabled=t})),this.updateCar=e=>i(this,void 0,void 0,(function*(){s.state.selectedCar&&(yield r.API.updateCar(s.state.selectedCar.id,e)),o.layoutService.updateControl(),yield o.layoutService.updateGarage(),s.state.selectedCar=null})),this.generateCars=()=>i(this,void 0,void 0,(function*(){const e=this.getRandomCars();yield Promise.all(e.map((e=>r.API.createCar(e)))),yield o.layoutService.updateGarage()})),this.getRandomName=()=>{const e=["Ascari","McLaren","Bentley","Bugatti","Porsche","Ferrari","Lotus","Maserati","Jaguar","Zenvo","Venturi","Laraki","Lamborghini"],t=["Viper","Stylus","Cayman","Sarthe","Cerbera","Costin","Alpine","Spyder","Zonda","Calibra","Senna","Urraco","Sky","CLK","GTX","GTR"];return`${e[Math.floor(e.length*Math.random())]} ${t[Math.floor(t.length*Math.random())]}`},this.getRandomColor=()=>`#${Math.random().toString(16).slice(2,8)}`,this.getRandomCars=(e=100)=>new Array(e).fill(0).map((()=>({name:this.getRandomName(),color:this.getRandomColor()})))}}},174:function(e,t,n){var i=this&&this.__awaiter||function(e,t,n,i){return new(n||(n=Promise))((function(a,r){function s(e){try{l(i.next(e))}catch(e){r(e)}}function o(e){try{l(i.throw(e))}catch(e){r(e)}}function l(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,o)}l((i=i.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.layoutService=void 0;const a=n(785),r=n(287),s=n(719),o=n(724),l=n(657);t.layoutService=new class{constructor(){this.createElement=(e,t,n,i)=>{const a=document.createElement(`${e}`);return a.innerText=`${t}`,n&&a.classList.add(...n),i&&(a.id=i),a},this.updateControl=()=>{s.control.inpTextCreate.elem.value="",s.control.inpColorCreate.elem.value="#000000",s.control.btnCreate.elem.disabled=!0,s.control.inpTextUpdate.elem.value="",s.control.inpColorUpdate.elem.value="#000000",s.control.inpTextUpdate.elem.disabled=!0,s.control.inpColorUpdate.elem.disabled=!0,s.control.btnUpdate.elem.disabled=!0},this.updateGarage=()=>i(this,void 0,void 0,(function*(){const e=yield o.API.getCars(l.state.garagePage);if(e){const{items:t,count:n}=e;l.state.garageCars=t,n&&(l.state.garageTotalCars=+n)}else a.garage.blockPage();a.garage.render(),a.garage.pagination.updatePagination()})),this.updateWinners=()=>i(this,void 0,void 0,(function*(){const e=yield o.API.getWinners(l.state.winnersPage,l.state.winnersSort,l.state.winnersSortOrder);if(e){const{items:t,count:n}=e;l.state.winnersCars=t,n&&(l.state.winnersTotalCars=+n)}r.winners.render(),r.winners.pagination.updatePagination()})),this.renderNextPage=()=>i(this,void 0,void 0,(function*(){"garage"===l.state.view&&(l.state.garagePage+=1,yield this.updateGarage()),"winners"===l.state.view&&(l.state.winnersPage+=1,yield this.updateWinners())})),this.renderPrevPage=()=>i(this,void 0,void 0,(function*(){"garage"===l.state.view&&(l.state.garagePage-=1,yield this.updateGarage()),"winners"===l.state.view&&(l.state.winnersPage-=1,yield this.updateWinners())})),this.setSortOrder=e=>i(this,void 0,void 0,(function*(){l.state.winnersSortOrder="ASC"===l.state.winnersSortOrder?"DESC":"ASC",l.state.winnersSort=e,yield this.updateWinners()})),this.getCoordinates=e=>{const{top:t,left:n,width:i,height:a}=e.getBoundingClientRect();return{x:n+i/2,y:t+a/2}},this.getDistance=(e,t)=>{const n=this.getCoordinates(e),i=this.getCoordinates(t);return Math.hypot(i.x-n.x,i.y-n.y)}}}},649:function(e,t,n){var i=this&&this.__awaiter||function(e,t,n,i){return new(n||(n=Promise))((function(a,r){function s(e){try{l(i.next(e))}catch(e){r(e)}}function o(e){try{l(i.throw(e))}catch(e){r(e)}}function l(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,o)}l((i=i.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.racingService=void 0;const a=n(724),r=n(657),s=n(785);t.racingService=new class{constructor(){this.requestDrive=(e,t)=>i(this,void 0,void 0,(function*(){const n=e.elem.dataset.carId,{velocity:i,distance:s}=yield a.API.startEngine(+n),o=Math.round(s/i);r.state.animation[n]=e.animationRace(t,o);const{success:l}=yield a.API.driveEngine(+n);if(!l){window.cancelAnimationFrame(r.state.animation[n].driveId);const t=e.animationAlarm();r.state.animationAlarm.push({id:n,alarmId:t})}return{success:l,id:n,time:o}})),this.requestStopDrive=e=>i(this,void 0,void 0,(function*(){const t=e.elem.dataset.carId;r.state.animation[t]&&window.cancelAnimationFrame(r.state.animation[t].driveId),this.clearAlarms(t),yield a.API.stopEngine(+t),e.returnToStart()})),this.clearAlarms=e=>{for(let t=0;t<r.state.animationAlarm.length;t++){const n=r.state.animationAlarm[t];n.id===e&&(clearInterval(n.alarmId),r.state.animationAlarm.splice(t,1),t--)}},this.startDriveAll=()=>i(this,void 0,void 0,(function*(){const e=r.state.garageTracks.map((e=>e.carId)),t=r.state.garageTracks.map((e=>i(this,void 0,void 0,(function*(){return yield e.startDrive()})))),n=yield this.findWinner(t,e);s.garage.showWinner(n),yield this.saveWinner(n.id,n.time)})),this.findWinner=(e,t)=>i(this,void 0,void 0,(function*(){const{success:n,id:i,time:a}=yield Promise.race(e);if(!n){const n=t.findIndex((e=>e===+i)),a=[...e.slice(0,n),...e.slice(n+1,e.length)],r=[...t.slice(0,n),...t.slice(n+1,t.length)];return yield this.findWinner(a,r)}return{success:n,id:i,time:a}})),this.stopDriveAll=()=>i(this,void 0,void 0,(function*(){yield Promise.all(r.state.garageTracks.map((e=>e.stopDrive())))})),this.saveWinner=(e,t)=>i(this,void 0,void 0,(function*(){const n=yield a.API.getWinner(+e),i=+(t/1e3).toFixed(2);n.id?yield a.API.updateWinner(+e,{wins:++n.wins,time:t<i?t:i}):yield a.API.createWinner({id:+e,wins:1,time:i})}))}}},657:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.state=void 0,t.state=new class{constructor(){this.garagePageLimit=7,this.garagePage=1,this.garageTotalCars=0,this.garageCars=[],this.garageTracks=[],this.winnersPageLimit=10,this.winnersPage=1,this.winnersTotalCars=1,this.winnersCars=[],this.winnersSort="wins",this.winnersSortOrder="DESC",this.selectedCar=null,this.view="garage",this.animation={},this.animationAlarm=[]}}},604:(e,t)=>{var n;Object.defineProperty(t,"__esModule",{value:!0}),t.engineStatus=void 0,(n=t.engineStatus||(t.engineStatus={})).started="started",n.stopped="stopped",n.drive="drive"}},t={};function n(i){var a=t[i];if(void 0!==a)return a.exports;var r=t[i]={exports:{}};return e[i].call(r.exports,r,r.exports,n),r.exports}n.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n(607)})();